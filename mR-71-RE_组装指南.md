<a href="https://www.radiokot.ru/"><img src="https://www.radiokot.ru/files/button.gif" width="88"
height="31" border="0" hspace="0" vspace="0" alt="РадиоКОТ - популярно об электронике. Авторские схемы, новые разработки. Обучение по электронике, микроконтроллерам, ПЛИС. Форум"></a>

## 前言

这次想拿捏一台 [mR-71 交流欧姆表](https://radiokot.ru/artfiles/6673/)，采用德国精工标准

## 关于原版mR-71

### 作者

原版mR-71由 [Andrey_B](https://www.radiokot.ru/forum/memberlist.php?mode=viewprofile&u=21307) 设计硬件和软件，在radiokot论坛发布

### PCB和固件

截至2024/03/19

- PCB版本：第1版

- 固件版本：[v0.2](https://disk.yandex.ru/d/7r-Sy9olLtvGCg/FirmWare)

  > 固件只提供hex格式，不提供源码，不需要注册
  >
  > v0.2相比v0.1，可保存5组不同探头的校准数据

### 相关链接

以下链接需要科学上网、俄语翻译

[文章：交流欧姆表 mR-71](https://radiokot.ru/artfiles/6673/)

> 文章最后的文件：Gerber、固件v0.1、元件位置图、原理图

[网盘](https://disk.yandex.ru/d/7r-Sy9olLtvGCg)

> 固件v0.2、演示视频、探头接触PCB

[讨论贴](http://www.radiokot.ru/forum/viewtopic.php?t=180822)

> 作者发布mR-71文章后的讨论贴

[帖子主题：低电阻计](https://www.radiokot.ru/forum/viewtopic.php?f=10&t=179105)

> 作者早期分享低阻计想法的讨论贴

## 关于重制版mR-71

### 作者

重制版mR-71由 [OldGerman](https://github.com/oldgerman) 设计，在GitHub发布

### PCB：主板

原版mR-71的测量技术实现优雅，但硬件还可以改进很多地方，2层PCB长边尺寸超过10cm，布局和布线都有待优化

重制版mR-71采用紧凑的设计，4层PCB，上下板由BTB连接，使用MCX同轴连接器连接4线测试夹，配有经久耐用的外壳，还支持IPS全视角屏幕

模拟部分的主要修改：

- 供电修改：将原版的12V DCDC供电的运放，改为低噪声LM27762正负5V供电，LM27762由TPS63000升压供电

- 运放修改：将原版的MCP4392、INA828、MCP6022，分别用AD8066、AD8221、AD8606代替
- 1.5V 缓冲运放电路修改：原版可能发生自激震荡，修改为二阶压控电压源(VCVS)低通滤波
- 增加一路AC耦合：DAC2_OS增加AC耦合，以适配正负5V供电的运放

其余部分的修改影响不大，详见[原理图](https://github.com/oldgerman/mR-71-RE/tree/master/Schematic)

| ![PCB_mR-71-RE_1](Images/PCB_mR-71-RE_v1.1：1.png) | ![PCB_mR-71-RE_2](Images/PCB_mR-71-RE_v1.1：2.png) |
| -------------------------------------------------- | -------------------------------------------------- |

- 板厚：<span style="color:red;">1.0 mm</span>
- 层数：4
- 尺寸：7.34 x 7.12 cm
- 焊盘总数：700
- 软件：Altium 23.3.1
- 版本：v1.1

### PCB：开尔文焊盘电阻测试板

方便开尔文夹子测试低阻值采样电阻，可焊接校准的3R、1K电阻，该板是明显的拼版，通常是不能免费打样的

这些电阻的焊盘设计来自ADI的文章：[Optimize High-Current Sensing Accuracy by Improving Pad Layout of Low-Value Shunt Resistors](https://www.analog.com/en/resources/analog-dialogue/articles/optimize-high-current-sensing-accuracy.html)

| ![PCB_Kelvin_RES_1](Images/PCB_Kelvin_RES_1.png) | ![PCB_Kelvin_RES_2](Images/PCB_Kelvin_RES_2.png) |
| ------------------------------------------------ | ------------------------------------------------ |

- 板厚：1.6mm
- 层数：2
- 尺寸：9.70 x 6.78 cm
- 软件：JLCEDA-Pro
- 版本：v1.0

### PCB：RG316转接板

制作一套RG316线的开尔文夹子需要两片该PCB

| ![PCB_RG316_To_Kelvin_Clip_1](Images/PCB_RG316_To_Kelvin_Clip_1.png) | ![PCB_RG316_To_Kelvin_Clip_2](Images/PCB_RG316_To_Kelvin_Clip_2.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

- 板厚：1.6mm
- 层数：2
- 尺寸：3.04 x 0.6 cm
- 软件：JLCEDA-Pro
- 版本：没有版本

### 外壳

盒盖设计，壳厚2mm，确保经久耐用

| ![mR-71-RE6_外壳SW：0](Images/mR-71-RE6_外壳SW：0.png) | ![mR-71-RE6_外壳SW：1](Images/mR-71-RE6_外壳SW：1.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

## 采购

### 主机电子元件 BOM

[MR-71_RE6_BOM.xlsx](https://github.com/oldgerman/mR-71-RE/blob/master/BOM/20240317_MR-71_RE6_BOM.xlsx)：EXCEL格式的BOM文件，灰色条覆盖的是不用焊接的器件，原理图可能与该BOM表格某些器件的值不一样，请以BOM表格的值为准！

[MR-71_RE6_BOM.pdf](https://github.com/oldgerman/mR-71-RE/blob/master/BOM/20240317_MR-71_RE6_BOM.pdf)：EXCEL格式的BOM文件导出的PDF文件

[MR-71_RE6_BOM.html](https://github.com/oldgerman/mR-71-RE/blob/master/BOM/20240317_MR-71_RE6_BOM.html)：交互式BOM，浏览器打开即可，该交互BOM不清楚的器件型号请参照上面的EXCEL文件

BOM预览：

> 电子元件突破80种，一套（电阻电容算到每颗）按照全新原装报价，费用约111元，不包括邮费

![20240317_MR-71_RE6_BOM](Images/20240317_MR-71_RE6_BOM.jpg)



元件参数打斜杠的，以第一个为准

元件参数有的是DNP，不用焊接，DNP是Do Not Populate的缩写，意思是不用贴装的元件

仪表放大器的增益电阻可以用3.57K 0.1%（增益误差±0.1% -0.34%），如果要求高可以用3.6K 0.1% 叠焊 300K 0.1%（增益误差±0.2% ）

> 注：AD8221在G=10下的增益误差为0.3%
>
> 为啥这么麻烦？去年做这玩意的时候，原版用的 INA828 当时售价150￥一片，现在跌到30多还是贵，它的增益公式里是50K，我换的AD8221增益公式里是49.4K

### 开尔文测试夹

开尔文测试夹：2个，挑贵的牙口好的

[RG316 MCX直公头转焊接 0.5m](https://item.taobao.com/item.htm?id=745222539795)：4条

热缩管：开尔文夹子若不附带，则需直径12MM的<span style="color:red;">低温</span>热缩管，红色+黑色

### 校准电阻

> mR-71完全校准使用，发烧友可以用更高精度的绕线电阻

- 1206 3R 0.1%
- 1206 1K 0.1%

### 开尔文焊盘电阻测试板

- 2mm镀金香蕉座（K2A33）：50~100个
- 2512合金采样电阻：1mR、10mR、100mR
- 1206千分之一电阻：1R、10R、100R、1KR、10KR、100KR、1MR

### 外壳

外壳固定用的五金件

- 不锈钢内六角螺丝杯头 x4
  	规格：M1.6x12 (螺纹/螺纹的长度)，[链接](https://item.taobao.com/item.htm?id=40272016203)

- 注塑热熔铜滚花螺母 x4
  	规格：外2.5 M1.6 2.0高，[链接](https://item.taobao.com/item.htm?id=39063858665)
  
- 内六角扳手：对边1.5mm，拧外壳的M1.6杯头螺丝

工具

- 打磨：小平锉刀，圆锉刀，砂纸等

- 测量：游标卡尺

## 构建

### 主机

#### 分板

请用壁纸刀沿着PCB分板的两条白线中间正反面多划几下，掰断分板后，用锉刀+砂纸打磨至分板的白线消失

![mR-71-RE：PCB分板](Images/mR-71-RE：PCB分板.JPG)

#### 钢网

请把用于开钢网的[GTP文件](https://github.com/oldgerman/mR-71-RE/tree/master/Gerber/mR-71_RE_Stencil)发给厂家开10x10cm的钢片

此钢网还拼了开尔文焊盘电阻测试板的钢网，方便焊接

![](Images/20240321_mR-71_RE6_Stencil_10x10cm.png)

刷锡膏前，用多余的板垫在四周，防止钢网翘曲

| ![IMG_6569](Images/mR-71-RE：钢网：刷锡膏：1.JPG) | ![IMG_6571](Images/mR-71-RE：钢网：刷锡膏：2.JPG) |
| ----------------------------------------------------------- | ----------------------------------------------------------- |

对照交互式BOM摆元件，然后热风枪回流焊即可

| ![mR-71-RE：钢网：刷锡膏：3](Images/mR-71-RE：钢网：刷锡膏：3.JPG) | ![mR-71-RE：钢网：回流焊：1](Images/mR-71-RE：钢网：回流焊：1.JPG) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

#### 建议电烙铁焊接的元件

- 1个：欧姆龙信号继电器
- 2个：220uF电容（需要自己用镊子折弯引脚）
- 4个：MCX母座

#### 电池接线

成品1.25mm超薄端子线序可能是反的，可用镊子尖挑起塑料弹片拔出端子，交换一下线序

![088460253B8957981FA963E5E7D27AB9](Images/电池引线：线序.png)

剪掉电池引线留一小段，剪掉多余的1.25mm线，焊接在一起，热缩管包好

| ![IMG_6860](Images/电池引线：接线1.jpg) | ![IMG_6859](Images/电池引线：接线2.jpg) |
| ------------------------------------------------- | ------------------------------------------------- |

（也可拆开电池的金手指胶带重新焊接）

### 固件烧录

若使用非全视角的TFT屏幕，请用原版的[v0.2固件](https://disk.yandex.ru/d/7r-Sy9olLtvGCg/FirmWare)

若使用全视角的IPS屏幕，请用我反汇编修改过的[v0.2固件](https://github.com/oldgerman/mR-71-RE/blob/master/Hex/)

从ST官网安装并打开[STM32CubeProgrammer](https://www.st.com/en/development-tools/stm32cubeprog.html)软件，全程按住正面的中键不放，接着按一次背面的BOOT键，在软件的烧录方式里选择USB，点刷新一下，会识别到设备，点击连接，打开修改版固件，点击烧录，烧录完成后可松开中键，再按一次中键即可开机

（也可以通过SWD接口刷固件，就不罗嗦了）

### 开尔文测试夹

| ![IMG_6675](Images/开尔文测试夹：1：RG316转接板分板.jpg) | ![IMG_6670](Images/开尔文测试夹：2：拆解夹子.jpg)  |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 将RG316转接板一分为二                                        | 拆解夹子，取出压簧，接触片                                   |
| ![IMG_6671](Images/开尔文测试夹：3：弯折压簧并剪断多余的末端.jpg) | ![IMG_6697](Images/开尔文测试夹：4：处理后的压簧长度参考.jpg) |
| 用钳子对压簧的长边折弯出新的90度末端，多余的部分剪断         | 处理后的压簧长度：折弯处距离圈圈约31mm                       |
| ![IMG_6676](Images/开尔文测试夹：5：吸锡带清理触片预置的锡点.jpg) | ![IMG_6681](Images/开尔文测试夹：6：RG316转接板焊接.jpg) |
| 吸锡带清理触片预置的锡点                                     | 取下接触片上的塑料绝缘垫片，转接板的焊盘上锡膏，使用风枪回流焊接 |
| ![IMG_6690](Images/开尔文测试夹：7：焊接RG316线.jpg) | ![IMG_6710](Images/开尔文测试夹：8：重新组装夹子.jpg) |
| 焊接RG316线                                                  | 重新组装夹子：将接触片的绝缘片贴回去，将压簧塞回去，压簧长边的折耳嵌入两道塑料缝中，注意压簧不要与接触片短路（可调整压簧折耳的角度调整避让距离） |
| ![IMG_6717](Images/开尔文测试夹：9：缩热缩管.jpg)  | ![IMG_6723](Images/开尔文测试夹：10：一套夹子需做两幅.jpg) |
| 缩热缩管：因为夹子的塑料非常容易受热变形，风枪建议从低温开始尝试 | 一套夹子需做两幅                                             |

### 外壳

[STL模型路径](https://github.com/oldgerman/mR-71-RE/tree/master/STL/)

#### 独立零件

提供独立的各个零件，装配图如下

![](Images/20240320-1521_mR-71_RE6_shell_single_parts.png)

#### 连接零件

> 按钮比较多，小于厂家单件最小打印尺寸
>
> 上下壳可能被厂家瞎摆方向，打出来各个方向收缩不一样，装配困难
>
> 因此将所有零件用1.5mm连杆连接，作为一个整体打印

| ![20240320-1521_mR-71_RE6_shell_link_parts](Images/20240320-1521_mR-71_RE6_shell_link_parts.png) | ![](Images/20240320-1521_mR-71_RE6_shell_link_parts：惠普MJF打印样品.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

1套打出来，含上下壳，2套按钮（防止翻车），需用激光烧结尼龙打印

- 尺寸: 1.81 x 3.91 x 7.79cm
- 体积: 15.64cm³
- 表面积: 181.1cm²

#### 外壳处理

分件后的模型会残留连接杆，如果没有水口钳，可用指甲钳剪去，然后仔细用刀片削平残留的切口，直至切口与周围的表面齐平，否则装配效果不佳

考虑到成型公差，按钮背面的小凸起加高了0.2mm，按钮装上后可能按不动，可以自己用锉刀小心打磨一下，按钮可能会很紧按不动，也需要小锉刀打磨（平锉刀，圆锉刀），上壳按钮最佳厚度3.7mm，下壳按钮最佳厚度3.2mm

| ![](Images/20240320-1521_mR-71_RE6_shell_link_parts：处理：1.png) | ![](Images/20240320-1521_mR-71_RE6_shell_link_parts：处理：2.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

外壳的上壳需要使用烙铁埋入4颗注塑滚花螺母，烙铁头的温度不要太高，应调节到不大于外壳材料的打印温度，考虑到公差，预埋孔给的比较小，可以用直径不大于2mm的麻花钻扩孔

烙铁埋滚花螺母时，融化的耗材可能堵住螺母孔，可以自己加工一个短螺丝堵住孔然后再用烙铁埋：

| ![](Images/20240320-1521_mR-71_RE6_shell_link_parts：埋热熔滚花螺母：1.png) | ![](Images/20240320-1521_mR-71_RE6_shell_link_parts：埋热熔滚花螺母：2.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |



## 按键操作

参见[原文](https://radiokot.ru/artfiles/6673/)
